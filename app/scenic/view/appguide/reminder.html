<script src="__ROOT__/static/scenic/js/flexible.js" type="text/javascript" charset="utf-8"></script>
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>预约提醒</title>
		<link rel="stylesheet" type="text/css" href="__ROOT__/static/scenic/css/reminder.css"/>
		<style type="text/css">
			[v-cloak] {
			     display: none;
			 }
		</style>
	</head>
	<body style="background:#f1f1f1;">
		<div id="app" v-cloak>
			<div class="header-title">
				<i class="bakck"></i>
				评价详情
			</div>
			<ul class="tab-list">
				<li  @click="tab('0')" v-bind:class="{'active':tabindex=='0'}">全部预约</li>
				<li @click="tab('1')" v-bind:class="{'active':tabindex=='1'}">已预约</li>
				<li @click="tab('2')" v-bind:class="{'active':tabindex=='2'}">已完成</li>
				<li @click="tab('3')" v-bind:class="{'active':tabindex=='3'}">已过期</li>
			</ul>
			
			<div class="list">
				<ul>
					<li v-for="item in datalist" :key="item.id">
						<div class="narrator-info" style="margin-bottom:0.4rem;">
							<div class="input-box">
								<span class="title">预约人</span>
								<strong class="info">{{item.vist_name}}</strong>
							</div>
							<div class="input-box">
								<span class="title">到访人数</span>
								<strong class="info">{{item.vist_num}}人</strong>
							</div>
							<div class="input-box">
								<span class="title">到访时间</span>
								<strong class="info">{{item.vist_t}}</strong>
							</div>
							<div class="input-box input-boxs" v-bind:class="{'input-box-active':item.order_stat=='4'||item.order_stat=='3'}" style="border-bottom: none;">
								<span class="title">{{item.mark}}</span>
								<strong class="info">
									<div class="b1" v-if="item.order_stat=='3'">已完成</div>
									<div class="b1" v-else-if="item.order_stat=='4'">已过期</div>
									<div class="b1" v-else>确认服务</div>
								</strong>
							</div>
						</div> 
					</li>
				</ul>
			</div>
		</div>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vant@2.6/lib/vant.min.js"></script>
		<script src="__ROOT__/static/scenic/js/jquery.js" type="text/javascript" charset="utf-8"></script>
		
		<script type="text/javascript">
				new Vue({
					el: '#app',
					data(){
						return{
							tabindex:0,//切换时需要的状态
							datalist:[]//列表数据
						}
					},
					created(){
						//页面加载获取数据渲染数据
						this.getData('0');
					},
					methods:{
						//切换tab
						tab(index){
							this.tabindex=index;
							this.getData(index);
						},
						//获取数据
						getData(tabindex){ //tabindex挡墙状态
							//获取数据
							let url='{:url("api.guide/order")}'
							$.ajax({
							  type: 'get',
							  url: url,
							  data:{statue:tabindex,username:'xiaoming'},
							  success: (res)=>{
								//返回数据
								console.log(res)
								//后台获取的数据直接填写
								let data=[{
									id:1,
									vist_name:"张三",//预约人
									vist_num:"20", //到访人数
									vist_t:"2020/10/01-10:00-12:00",    //到访时间
									time:'',	
									mark:'距服务开始还有1天15小时23分',   
									order_stat:'1',//预约状态
								},{
									id:2,
									vist_name:"张三1",//预约人
									vist_num:"30", //到访人数
									vist_t:"2020/10/01-10:00-12:00",    //到访时间
									time:'',	
									mark:'预约已过期',   
									order_stat:'4',//预约状态
								},{
									id:3,
									vist_name:"张三1",//预约人
									vist_num:"30", //到访人数
									vist_t:"2020/10/01-10:00-12:00",    //到访时间
									time:'',	
									mark:'预约已完成',   
									order_stat:'3',//预约状态
								}];
								this.datalist=data;
							  },error:(e)=>{
								 alert('发生错误');
							  }
							});
						}
					}
				})	
		</script>
		
	</body>
</html>
